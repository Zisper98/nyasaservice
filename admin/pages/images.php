<?php
// Job Lister Free Version - https://www.netartmedia.net/job-lister
// A software product of NetArt Media, All Rights Reserved
// The following source codes are obfuscated / made difficult to edit. 
// When upgrading to Job Lister PRO, you get the full non-obfuscated source codes 
// and also extra features - please find details on:
// https://www.netartmedia.net/job-lister#pro
// Find out more PHP scripts and ready-made website systems on:
// https://www.netartmedia.net/products
?><?php if(!defined('IN_SCRIPT')) die(""); $id=intval($_REQUEST["id"]); $this->bgizitc($id); ?> <script type="text/javascript" src="../js/jquery-ui.min.js"></script> <div class="card"> <a class="btn btn-default pull-right" href="index.php?page=edit&id=<?php echo $id;?>" style="margin-top:12px;margin-right:12px;"><i class="ti-angle-left"></i> <?php echo $this->fjod["go_back"];?></a> <div class="clearfix"></div> <div class="header"> <h4 class="title"><?php echo $this->fjod["modify_images"];?></h4> <br/> <i><?php echo $this->fjod["drag_images_order"];?></i> </div> <div class="container" id="main_content"> <?php $rzxkyez = simplexml_load_file($this->tlxb); $bjhcg = trim($rzxkyez->listing[$id]->images); if(isset($_REQUEST["current"])&&isset($_REQUEST["new"])) { $current=str_replace("img","",$_REQUEST["current"]); $avagckl=str_replace("img","",$_REQUEST["new"]); $rglt=strpos($bjhcg,$current); $nsaeda=strpos($bjhcg,$avagckl); if ( $rglt!==false && $nsaeda!==false ) { $bjhcg = str_replace($avagckl,"###",$bjhcg); $bjhcg = str_replace($current,$avagckl,$bjhcg); $bjhcg = str_replace("###",$current,$bjhcg); $rzxkyez->listing[$id]->images=trim($bjhcg,","); $rzxkyez->asXML($this->tlxb); } } else if(isset($_REQUEST["del"])) { $pos=strpos($bjhcg,$_REQUEST["del"]); if($pos!==false) { if(file_exists("../uploaded_images/".$_REQUEST["del"].".jpg")) { unlink("../uploaded_images/".$_REQUEST["del"].".jpg"); } if(file_exists("../thumbnails/".$_REQUEST["del"].".jpg")) { unlink("../thumbnails/".$_REQUEST["del"].".jpg"); } $bjhcg = str_replace($_REQUEST["del"],"",$bjhcg); $bjhcg = str_replace(",,",",",$bjhcg); $bjhcg = trim($bjhcg,","); $rzxkyez->listing[$id]->images=trim($bjhcg,","); $rzxkyez->asXML($this->tlxb); } } else if(isset($_POST["proceed_save"])) { $wvft = ""; $dxcuph=25; $okpudwt="../"; include("include/images_processing.php"); if($bjhcg != "") { $wvft = $bjhcg.",".$wvft; } if(trim($_POST["dele_images"]) != "") { $vlkja = explode(",",trim($_POST["dele_images"])); foreach($vlkja as $oilwmz) { if(trim($oilwmz)=="") continue; $this->bgizitc($oilwmz); if(file_exists("../thumbnails/".$oilwmz.".jpg")) { unlink("../thumbnails/".$oilwmz.".jpg"); } if(file_exists("../uploaded_images/".$oilwmz.".jpg")) { unlink("../uploaded_images/".$oilwmz.".jpg"); } $wvft=str_replace($oilwmz.",","",$wvft); $wvft=str_replace($oilwmz,"",$wvft); } } $rzxkyez->listing[$id]->images=$wvft; $rzxkyez->asXML($this->tlxb); $bjhcg=trim($wvft,","); } ?> <div class="row"> <div class="col-md-8"> <br/> <form action="index.php" method="post" enctype="multipart/form-data"> <input type="hidden" name="page" value="images"/> <input type="hidden" name="proceed_save" value="1"/> <input type="hidden" name="dele_images" id="dele_images" > <input type="hidden" name="id" value="<?php echo $id;?>"/> <script> function Dele(x) { document.location.href="index.php?page=images&id=<?php echo $id;?>&del="+x; } </script> <div id="drag_images"> <?php $dvlgn = 0; $yoaekyn = explode(",",$bjhcg); for($i=0;$i<sizeof($yoaekyn);$i++) { if(isset($yoaekyn[$i]) && $yoaekyn[$i]!="") { ?> <div ondragstart="javascript:img_drag_start(this)" style="float:left;width:220px;margin-right:20px;margin-bottom:20px;background:#ffffff;padding:10px" class="img-shadow drag_img" id="img<?php echo $yoaekyn[$i];?>"> <a class="pull-right" href="javascript:Dele('<?php echo $yoaekyn[$i];?>')"><img src="images/cancel.gif" alt="<?php echo $this->fjod["delete"];?>" width="21" height="20" border="0"></a> <br> <img src="../thumbnails/<?php echo $yoaekyn[$i];?>.jpg" alt="" width="200"/> </div> <?php } ?> <span style="display:none"> <input type="file" name="userfile<?php echo $i;?>"> </span> <?php $dvlgn++; } ?> </div> <div class="clearfix"></div> <br/> <h4 class="title"><?php echo $this->fjod["upload_more_images"];?></h4> <hr/> <input type="file" class="pull-left" name="images[]" id="images" multiple="multiple"/> <div class="clearfix"></div> <br/> <br/> <input type="submit" class="btn btn-primary pull-left" value=" <?php echo $this->fjod["submit"];?> "/> </form> <script> function init_drag() { $('.drag_img').draggable( { containment: '#main_content', revert: true } ); $('.drag_img').droppable( { drop: handle_drop } ); } function lapeo( event, ui ) { var id = $(this).attr('id'); var draggable = ui.draggable; document.location.href="index.php?page=images&id=<?php echo $id;?>&current="+id+"&new="+draggable.attr('id'); } var x_index=100; function odfvugc(x) { x_index=x_index+100; x.style.zIndex=x_index; } $(init_drag); </script> <div class="clearfix"></div> <br/><br/> </div> </div> </div> </div>